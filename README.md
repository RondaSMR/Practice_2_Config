# Dependency Graph Visualizer for NuGet Packages

Инструмент для визуализации графа зависимостей пакетов NuGet, реализованный в рамках пяти этапов разработки.

## Структура проекта

Для каждого этапа есть собственная программа с припиской `stage*.py`:

- **Этап 1**: `stage1.py` - Конфигурация и базовый CLI
- **Этап 2**: `stage2.py` - Сбор данных о зависимостях  
- **Этап 3**: `stage3.py` - Построение графа зависимостей
- **Этап 4**: `stage4.py` - Анализ обратных зависимостей
- **Этап 5**: `stage5.py` - Визуализация графа

## Запуск этапов

### Этап 1: Конфигурация
```bash
python stage1.py
```
Задание первого этапа запускается без каких-либо дополнительных параметров. Программа создает файл конфигурации `config.json` с настройками по умолчанию.

### Этап 2: Сбор данных
```bash
# Запуск с конфигурацией по умолчанию
python stage2.py

# Запуск с кастомными параметрами
python stage2.py --package "Newtonsoft.Json" --version "13.0.1" --max-depth 3
```

### Этап 3: Построение графа
```bash
# Режим реального репозитория
python stage3.py --package "Newtonsoft.Json" --version "13.0.1"

# Тестовый режим
python stage3.py --test-mode --package "A" --version "1.0.0"
```

### Этап 4: Обратные зависимости
```bash
# Анализ обратных зависимостей
python stage4.py --package "Newtonsoft.Json" --version "13.0.1"

# С фильтрацией
python stage4.py --package "A" --version "1.0.0" --filter "System"
```

### Этап 5: Визуализация
```bash
# Базовая визуализация
python stage5.py

# С выводом ASCII-дерева
python stage5.py --ascii-tree

# С ограничением глубины
python stage5.py --max-depth 2 --package "NLog" --version "5.0.0"
```

## Конфигурация

Основные настраиваемые параметры в `config.json`:

- `package_name` - имя анализируемого пакета
- `package_version` - версия пакета  
- `repository_url` - URL репозитория NuGet
- `test_mode` - режим работы с тестовыми данными
- `max_depth` - максимальная глубина анализа
- `ascii_tree` - вывод в формате ASCII-дерева
- `filter_substring` - подстрока для фильтрации пакетов

## Особенности реализации

### Этап 1
- Чтение конфигурации из JSON файла
- Валидация всех параметров
- Вывод конфигурации в формате ключ-значение
- Обработка ошибок для всех параметров

### Этап 2  
- Получение информации о прямых зависимостях пакета
- Поддержка формата пакетов .NET (NuGet)
- Работа с указанной версией пакета
- Вывод прямых зависимостей на экран

### Этап 3
- Построение графа зависимостей алгоритмом DFS с рекурсией
- Учет максимальной глубины анализа
- Фильтрация пакетов по подстроке
- Обработка циклических зависимостей
- Поддержка тестового режима

### Этап 4
- Поиск обратных зависимостей
- Использование алгоритма обхода из предыдущего этапа
- Визуализация пакетов, которые зависят от заданного пакета

### Этап 5
- Генерация текстового представления на языке Graphviz DOT
- Создание изображений графа (требуется установленный Graphviz)
- Вывод зависимостей в виде ASCII-дерева
- Демонстрация для трех различных пакетов

## Тестовые данные

Проект включает встроенные тестовые данные для работы без доступа к интернету:

- **Пакет A**: Базовый пакет с зависимостями B и C
- **Пакет B**: Пакет с зависимостью D  
- **Пакет C**: Пакет с зависимостями D и E
- **Пакет D**: Пакет с зависимостью F
- **Пакеты E, F**: Пакеты без зависимостей

## Требования

- Python 3.7+
- Для генерации изображений: Graphviz (опционально)

## Примеры использования

```bash
# Полный анализ пакета Newtonsoft.Json
python stage1.py
python stage2.py --package "Newtonsoft.Json" --version "13.0.1"
python stage3.py --package "Newtonsoft.Json" --version "13.0.1" --max-depth 2
python stage4.py --package "Microsoft.NETFramework.ReferenceAssemblies" --version "4.6.2"
python stage5.py --package "Newtonsoft.Json" --version "13.0.1" --ascii-tree

# Работа в тестовом режиме
python stage3.py --test-mode --package "A" --version "1.0.0" --max-depth 3
python stage4.py --test-mode --package "D" --version "1.0.0"
python stage5.py --test-mode --package "A" --version "1.0.0" --ascii-tree
```